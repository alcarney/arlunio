<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo" rel="stylesheet">

        <!-- TODO: Run CSS + JS through minifiers -->
        <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" >
        <link rel="stylesheet" href="../../_static/css/highlight.css " type="text/css" >

        <script type="text/javascript" id="documentation_options"
                data-url_root="../../"
                src="../../_static/documentation_options.js"></script>
        <script async
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
                type="application/javascript"></script>

        <title>The Release Process - Stylo v0.9.0</title>

        
    </head>
    <body>
        <!-- Slightly modified from the basic theme in the Sphinx repository
        https://github.com/sphinx-doc/sphinx/blob/master/sphinx/themes/basic/layout.html -->

        <div class="header">
            <a href="../../index.html" id="site-name"><h2>Stylo<sub>v0.9.0</sub></h2></a>
            <label class="menu-toggle" for="menu-toggle">Menu</label>
            <input type="checkbox" id="menu-toggle">
            <div class="nav-sections">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../using/index.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/index.html">Extending</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maths/index.html">Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About the Docs</a></li>
</ul>

            </div>
        </div>
        <div class="nav">
            <div>
                <h3 class="nav-header">Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">The Release Process</a><ul>
<li><a class="reference internal" href="#documentation-release">Documentation Release</a></li>
<li><a class="reference internal" href="#package-release">Package Release</a><ul>
<li><a class="reference internal" href="#drafting-a-release">Drafting a Release</a></li>
<li><a class="reference internal" href="#the-release">The Release</a></li>
<li><a class="reference internal" href="#after-the-release">After the Release</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
            <form class="search" action="../../search.html" method="get">
                  <input type="text" name="q" placeholder="Search"/>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
            </form>
        </div>
        <div class="content">
<div class="main">
    <div class="section" id="the-release-process">
<span id="contribute-ref-release"></span><h1>The Release Process<a class="headerlink" href="#the-release-process" title="Permalink to this headline">¶</a></h1>
<p>This page outlines the release process, what has to be done before a release,
how a release is triggered and how a release actually works. While it’s not
essential for every contributor to know the inner workings of a release it is
certainly useful to know as it provides context for some of the decisions made
in our processes such as <a class="reference internal" href="branching-policy.html#contribute-ref-branching"><span class="std std-ref">The Branching Policy</span></a></p>
<p>There are currently 2 distinct release processes in <code class="code docutils literal notranslate"><span class="pre">stylo</span></code>:</p>
<ul class="simple">
<li><a class="reference internal" href="#contribute-ref-release-docs"><span class="std std-ref">Documentation Release</span></a>: This builds, tests and deploys the
documentation to <a class="reference external" href="https://pages.github.com/">GitHub Pages</a></li>
<li><a class="reference internal" href="#contribute-ref-release-package"><span class="std std-ref">Package Release</span></a>: This builds, tests and deploys
<code class="code docutils literal notranslate"><span class="pre">stylo</span></code> itself to <a class="reference internal" href="../../glossary.html#term-pypi"><span class="xref std std-term">PyPi</span></a></li>
</ul>
<div class="section" id="documentation-release">
<span id="contribute-ref-release-docs"></span><h2>Documentation Release<a class="headerlink" href="#documentation-release" title="Permalink to this headline">¶</a></h2>
<p>A documentation release is triggered everytime a commit is made on the
<code class="code docutils literal notranslate"><span class="pre">develop</span></code> branch of the main repository. <a class="reference internal" href="../../glossary.html#term-travis"><span class="xref std std-term">Travis</span></a> will run all the
tests as normal, then as long as the <code class="code docutils literal notranslate"><span class="pre">docs-build</span></code> task completes
successfully it will proceed to publish the new version of the documentation.</p>
<p>For full details on the documentation build process please see
<a class="reference internal" href="documentation-build.html#contribute-ref-docs-build"><span class="std std-ref">this</span></a> article</p>
<p>Below is the current Travis deployment configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pages</span>
  <span class="l l-Scalar l-Scalar-Plain">skip-cleanup</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">github-token</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$GH_TOKEN</span>
  <span class="l l-Scalar l-Scalar-Plain">local-dir</span><span class="p p-Indicator">:</span> <span class="s">&quot;docs/_build/html/&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">verbose</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">on</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">branch</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">develop</span>
    <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$TOXENV = docs-build</span>
    <span class="l l-Scalar l-Scalar-Plain">python</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3.6</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The box above is extracted from the current <code class="code docutils literal notranslate"><span class="pre">.travis.yml</span></code> file. If what
you read here doesn’t match what is shown above, it’s most likely that this
documentation is out of date and an issue should be raised.</p>
</div>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">provider:</span> <span class="pre">pages</span></code>: We tell Travis that we are deploying a website to
GitHub Pages</li>
<li><code class="code docutils literal notranslate"><span class="pre">skip-cleanup:</span> <span class="pre">true</span></code>: By default Travis will delete any files generated
during the build - we obviously don’t want that so we skip that step.</li>
<li><code class="code docutils literal notranslate"><span class="pre">github-token</span></code>: The keys to GitHub</li>
<li><code class="code docutils literal notranslate"><span class="pre">local-dir</span></code>: Which directory contains the site</li>
<li><code class="code docutils literal notranslate"><span class="pre">verbose</span></code>: Tell Travis to print more about what it is doing.</li>
<li><code class="code docutils literal notranslate"><span class="pre">on</span></code>: Only do the release when the following conditions are met.<ul>
<li><code class="code docutils literal notranslate"><span class="pre">branch</span></code>: The build is running on the develop branch</li>
<li><code class="code docutils literal notranslate"><span class="pre">condition:</span> <span class="pre">$TOXENV</span> <span class="pre">=</span> <span class="pre">docs-build</span></code>: It only makes sense to publish when
we have built the documentation.</li>
<li><code class="code docutils literal notranslate"><span class="pre">python</span></code>: Only on the given version of python.</li>
</ul>
</li>
</ul>
<p>It’s also worth mentioning that the way Travis deploys the website is by force
pushing the generated HTML to the <code class="code docutils literal notranslate"><span class="pre">gh-pages</span></code> branch on the main
repository. I assume that’s a good thing since it is the default.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently the documentation is unversioned, whenever an update is available
it is published. This probably doesn’t matter too much right now as the
documentation is still very much under development. However this does mean
that the documentation may pull ahead of the version of <code class="code docutils literal notranslate"><span class="pre">stylo</span></code> that is
generally available which would lead to confusion. This should be changed
sometime in the future.</p>
</div>
</div>
<div class="section" id="package-release">
<span id="contribute-ref-release-package"></span><h2>Package Release<a class="headerlink" href="#package-release" title="Permalink to this headline">¶</a></h2>
<p>A package release is triggered whenever a commit it made on the <code class="code docutils literal notranslate"><span class="pre">master</span></code>
branch of the main repository. <a class="reference internal" href="../../glossary.html#term-travis"><span class="xref std std-term">Travis</span></a> will run all the tests as normal
and if the <code class="code docutils literal notranslate"><span class="pre">py36</span></code> task completes successfully then it will package and
publish <code class="code docutils literal notranslate"><span class="pre">stylo</span></code> to <a class="reference internal" href="../../glossary.html#term-pypi"><span class="xref std std-term">PyPi</span></a>.</p>
<p>However unlike the documentation release which is quite informal, there are a
number of things that need to be done before and after a package release</p>
<div class="section" id="drafting-a-release">
<h3>Drafting a Release<a class="headerlink" href="#drafting-a-release" title="Permalink to this headline">¶</a></h3>
<p>A draft release is made by opening a PR from the <code class="code docutils literal notranslate"><span class="pre">develop</span></code> branch onto the
<code class="code docutils literal notranslate"><span class="pre">master</span></code> branch of the main repository. In order for this PR to become a
proper release the following must be satisfied</p>
<ul class="simple">
<li>All the code, docs, tests etc that are to be included in the release have been
merged onto the <code class="code docutils literal notranslate"><span class="pre">develop</span></code> branch.</li>
<li>The <code class="code docutils literal notranslate"><span class="pre">stylo/_version.py</span></code> has been updated to the latest version number.</li>
<li>The <code class="code docutils literal notranslate"><span class="pre">CHANGES.rst</span></code> file has been updated to include a summary of the
changes included in the release. <strong>On the day of the merge the release
title is updated to include the date and version of the release</strong></li>
<li>All the tests pass and Travis is happy.</li>
</ul>
<p>If all is well and whoever is looking after the release is happy, then the PR
can be merged which will kick off the release process.</p>
</div>
<div class="section" id="the-release">
<h3>The Release<a class="headerlink" href="#the-release" title="Permalink to this headline">¶</a></h3>
<p>The process from when the PR is merged to the moment the latest <code class="code docutils literal notranslate"><span class="pre">stylo</span></code>
package turns up on PyPi is entirely automated. Travis will rerun all the tests
after the merge and then proceed to package and publish the new version.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Link to the article explaining the code related build processes, when it is
available.</p>
</div>
<p>Below is the current Travis configuration</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pypi</span>
  <span class="l l-Scalar l-Scalar-Plain">distributions</span><span class="p p-Indicator">:</span> <span class="s">&quot;sdist</span><span class="nv"> </span><span class="s">bdist_wheel&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">alcarney</span>
  <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">secure</span><span class="p p-Indicator">:</span> <span class="s">&quot;F27QSW59xfuwTIrJMUFNB5Mi1ELQArRvawldBt8YNZH9HxPWdThEUSnXZMs3vzHYV1NwiQV1h/3XalsCbB59fJogcN9NeNdGvM2Ff0phMURlCUytn3pJvuoMDCY4Dnwyy3GZ8XX/zhmZvIYBn1awiL7/JDe6j5iVyeyeKIRbX1DRHEjbKj4XhkHb2NFsbzs8F8fkBARGcldli611LAfuD1+6UQANyzEmyfg4wAbIctRgfQ1F4swp4jCAb5TjkUDEt2/9S2ai49kI7BY5nZ68D50dFNecuVvcXYRazEvGvxvt0OuZAqeUzr7aUTOlmGLp1vTP/QyXRYQDbnnSyvIr3fii104atM30QtBf/C1MlSgH68IOzMg4ULmnBSSFny4ICMIhzosuCVZWtxnghep0LENsk8f0USGsnLja+kOcgB8kGm/PQW4m3IRJpyR9GvzBeRMKoyF4B9o2IEq1nrl/K+EyoA+jtqxzd/gIxLEVrmSWSj37StX8WC1npoGIEDcVQLppf81++TEXR4tznPS3T52gGMrxY5cPYgAg0KItArEeoe0Mfx20kkVU+XkcWsgCP9ccoXu0erYYgvquoBYzyNrAz0JGxCQYC3iCVmUbt87yJRGWUfYPoWiVBJ3haHvi+M4HmpUDOpC/6J8OIAevnEMe22fJGcQTbZtX7JwM0H4=&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">on</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$TOXENV = py36</span>
    <span class="l l-Scalar l-Scalar-Plain">python</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3.6</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The box above is extracted from the current <code class="code docutils literal notranslate"><span class="pre">.travis.yml</span></code> file. If what
you read here doesn’t match what is shown above, it’s most likely that this
documentation is out of date and an issue should be raised.</p>
</div>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">provider:</span> <span class="pre">pypi</span></code>: Tell Travis that we are publishing a package to PyPi</li>
<li><code class="code docutils literal notranslate"><span class="pre">distributions</span></code>: We want to publish both the source and a compiled wheel</li>
<li><code class="code docutils literal notranslate"><span class="pre">user</span></code>, <code class="code docutils literal notranslate"><span class="pre">password</span></code>: PyPi credentials.</li>
<li><code class="code docutils literal notranslate"><span class="pre">on</span></code>: Only do the release if the following conditions are met.<ul>
<li><code class="code docutils literal notranslate"><span class="pre">condition:</span> <span class="pre">py36</span></code>: We only need to publish the package once, so we’re
currently using the Python 3.6 build.</li>
<li><code class="code docutils literal notranslate"><span class="pre">python:</span> <span class="pre">3.6</span></code>: Possibly a redundant condition? But since it works it
doesn’t seem worth the risk to take it out.</li>
<li>The build is on the master branch (an implicit default).</li>
</ul>
</li>
</ul>
<p>The package and its contents are defined by the <code class="code docutils literal notranslate"><span class="pre">setup.py</span></code> file at the
root of the repository.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Link to the article explaining the setup file when it’s written.</p>
</div>
</div>
<div class="section" id="after-the-release">
<h3>After the Release<a class="headerlink" href="#after-the-release" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../../_images/new-release.png"><img alt="../../_images/new-release.png" class="align-center" src="../../_images/new-release.png" style="width: 75%;" /></a>
<p>After the PR has been merged there is one last manual step to be done and that
is to create a <a class="reference external" href="https://github.com/alcarney/stylo/releases">release</a> on
GitHub.</p>
<p>After clicking on the <code class="code docutils literal notranslate"><span class="pre">Draft</span> <span class="pre">a</span> <span class="pre">new</span> <span class="pre">release</span></code> button on the releases page
you are taken to a page as shown above where the following fields need to be
filled in.</p>
<ul class="simple">
<li>The version string needs to be put in the tag name box</li>
<li><strong>The branch needs to be changed to master</strong></li>
<li>The title of the release needs to be copied over from the <code class="code docutils literal notranslate"><span class="pre">CHANGES.rst</span></code>
file</li>
<li>The changes for the release need to be copied over from the <code class="code docutils literal notranslate"><span class="pre">CHANGES.rst</span></code>
and pasted into the body. <em>Note: You will need to convert the text from rst to
markdown</em></li>
</ul>
<p>Once it has been filled out click the green <code class="code docutils literal notranslate"><span class="pre">Publish</span> <span class="pre">release</span></code> button and
you are done!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is the hope that this step can also be automated, by having something like
a webhook trigger on the merge to master we can use the GitHub API to
automatically create the release notice.</p>
</div>
</div>
</div>
</div>

    
</div>
        </div>
        <div class="footer">

            
                <p>
                  Powered by <a href="http://www.sphinx-doc.org/">Sphinx</a> 1.8.2 &amp;
                  <a href="https://github.com/alcarney/topos-theme">Topos Theme</a> 0.0.10
                </p>
        </div>
    </body>
</html>